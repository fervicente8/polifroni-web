---
import PvcImage from "../assets/images/typePvc.png";
import AluminumImage from "../assets/images/typeAluminum.png";
import WoodImage from "../assets/images/typeWood.png";
import PvcTexture from "../assets/images/pvc-texture.avif";
import AluminumTexture from "../assets/images/aluminum-texture.avif";
import WoodTexture from "../assets/images/wood-texture.avif";
---

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const materialWindows = document.querySelectorAll(".material-window");
    const sections = document.querySelectorAll(".behind-window-sections p");
    const contentSections = {
      imageSectionPVC: document.getElementById("imageContentPVC"),
      advantageSectionPVC: document.getElementById("advantageContentPVC"),
      disadvantageSectionPVC: document.getElementById("disadvantageContentPVC"),
      imageSectionAluminum: document.getElementById("imageContentAluminum"),
      advantageSectionAluminum: document.getElementById(
        "advantageContentAluminum"
      ),
      disadvantageSectionAluminum: document.getElementById(
        "disadvantageContentAluminum"
      ),
      imageSectionWood: document.getElementById("imageContentWood"),
      advantageSectionWood: document.getElementById("advantageContentWood"),
      disadvantageSectionWood: document.getElementById(
        "disadvantageContentWood"
      ),
    };

    materialWindows.forEach((window) => {
      window.addEventListener("click", () => {
        if (window.classList.contains("open")) {
          window.classList.remove("open");
          window.classList.add("close");
        } else {
          materialWindows.forEach((window) => {
            window.classList.remove("open");
          });
          window.classList.add("open");
          window.classList.remove("close");
        }
      });
    });

    function toggleClassesAndRenderContent(event) {
      const targetElement = event.target;
      const targetMaterial = targetElement.id.split("Section")[1];

      const sectionParent = targetElement.closest(".behind-window-sections");
      const siblingSections = sectionParent.querySelectorAll("p");
      siblingSections.forEach((section) => {
        section.classList.remove("selected");
        section.classList.add("non-selected");
      });

      for (const key in contentSections) {
        if (
          Object.prototype.hasOwnProperty.call(contentSections, key) &&
          key.includes(targetMaterial)
        ) {
          const element = contentSections[key];
          element.classList.add("hidden");
        }
      }

      targetElement.classList.remove("non-selected");
      targetElement.classList.add("selected");

      const sectionId = targetElement.id;
      contentSections[sectionId].classList.remove("hidden");
    }

    sections.forEach((section) => {
      section.addEventListener("click", toggleClassesAndRenderContent);
    });
  });
</script>

<div class='w-[97%] m-auto mb-10'>
  <h1 class='text-base md:text-xl uppercase bg-[#862e44] text-white p-3 mb-8'>
    PVC, Aluminio y Madera ¿Cuáles son sus ventajas?
  </h1>
  <section
    class='w-[100%] flex flex-col justify-around items-center gap-7 md:px-7 md:flex-row flex-wrap'
  >
    <!-- PVC -->
    <div class='relative'>
      <div
        class='material-window animate-fade-in open'
        style={{ borderImage: `url(${PvcTexture.src}) 30 repeat` }}
      >
        <div class='help-text'>Presiona para abrir</div>
        <div class='hinges-div'>
          <div
            class='hinge-top'
            style={{ backgroundImage: `url(${PvcTexture.src})` }}
          >
          </div>
          <div
            class='hinge-bottom'
            style={{ backgroundImage: `url(${PvcTexture.src})` }}
          >
          </div>
        </div>
        <div
          class='window-opener-base'
          style={{ backgroundImage: `url(${PvcTexture.src})` }}
        >
        </div>
        <div
          class='window-opener'
          style={{ backgroundImage: `url(${PvcTexture.src})` }}
        >
        </div>
        <div class='material-content relative'>
          <h3
            class='text-sm p-3 border border-[#862e44] font-[900] sm:text-xl lg:text-2xl absolute top-0 right-0 text-[#862e44] flex items-center select-none'
          >
            PVC
          </h3>
        </div>
      </div>

      <div
        class='border-x-[8px] border-y-[10px] behind-window-info p-4 absolute top-0 left-0 w-full h-full flex flex-col items-center animate-blurred-fade-in'
        style={{ borderImage: `url(${PvcTexture.src}) 30 repeat` }}
      >
        <div class='behind-window-sections mb-3'>
          <p class='show-image selected' id='imageSectionPVC'>Interior</p>
          <p class='show-advantage non-selected' id='advantageSectionPVC'>
            Ventajas
          </p>
          <p class='show-disadvantage non-selected' id='disadvantageSectionPVC'>
            Desventajas
          </p>
        </div>
        <img
          src={PvcImage.src}
          class='w-[85%] md:w-[100%] object-cover show'
          id='imageContentPVC'
        />
        <div
          class='flex-col justify-center h-[100%] overflow-y-scroll pb-2 sm:p-4 hidden'
          id='advantageContentPVC'
        >
          <div
            class='flex justify-between items-center gap-3 sm:gap-4 pb-4 border-b border-[#862e44]'
          >
            <h5 class='font-bold text-zinc-900'>Durabilidad</h5>
            <p class='text-sm text-gray-600 text-center'>
              El PVC es muy resistente a la corrosión, lo que significa que dura
              mucho tiempo sin deteriorarse.
            </p>
          </div>
          <div
            class='flex justify-between items-center gap-3 sm:gap-4 py-4 border-b border-[#862e44]'
          >
            <p class='text-sm text-gray-600 text-center'>
              ¿Sabías que el PVC se puede moldear fácilmente en diferentes
              formas y tamaños? Eso lo hace muy versátil para diferentes
              aplicaciones.
            </p>
            <h5 class='font-bold text-zinc-900'>Versatilidad</h5>
          </div>
          <div
            class='flex justify-between items-center gap-3 sm:gap-4 py-4 border-b border-[#862e44]'
          >
            <h5 class='font-bold text-zinc-900'>Aislante</h5>
            <p class='text-sm text-gray-600 text-center'>
              El PVC tiene buenas propiedades tanto térmicas como eléctricas, lo
              que lo convierte en un excelente material para aislamientos.
            </p>
          </div>
          <div class='flex justify-between items-center gap-3 sm:gap-4 pt-4'>
            <p class='text-sm text-gray-600 text-center'>
              Es autoextinguible, lo que significa que no contribuye a la
              propagación del fuego.
            </p>
            <h5 class='font-bold text-zinc-900'>Resistencia al fuego</h5>
          </div>
        </div>

        <div
          class='flex-col justify-center h-[100%] overflow-y-scroll pb-2 sm:p-4 hidden'
          id='disadvantageContentPVC'
        >
          <div
            class='flex justify-between items-center gap-3 sm:gap-4 pb-4 border-b border-[#862e44]'
          >
            <h5 class='font-bold text-zinc-900'>Emisiones tóxicas</h5>
            <p class='text-sm text-gray-600 text-center'>
              Si el PVC se quema o se descompone, puede liberar gases
              peligrosos, lo que es un riesgo para la salud.
            </p>
          </div>
          <div
            class='flex justify-between items-center gap-3 sm:gap-4 py-4 border-b border-[#862e44]'
          >
            <p class='text-sm text-gray-600 text-center'>
              El PVC se deforma con facilidad cuando se expone a altas
              temperaturas.
            </p>
            <h5 class='font-bold text-zinc-900'>Temperatura</h5>
          </div>
          <div class='flex justify-between items-center gap-3 sm:gap-4 pt-4'>
            <h5 class='font-bold text-zinc-900'>Resistencia</h5>
            <p class='text-sm text-gray-600 text-center'>
              Comparado con otros plásticos técnicos o metales, el PVC tiene una
              menor resistencia a la tensión y al impacto.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Aluminio -->
    <div class='relative'>
      <div
        class='material-window animate-fade-in'
        style={{ borderImage: `url(${AluminumTexture.src}) 30 repeat` }}
      >
        <div class='help-text'>Presiona para abrir</div>
        <div class='hinges-div'>
          <div
            class='hinge-top'
            style={{ backgroundImage: `url(${AluminumTexture.src})` }}
          >
          </div>
          <div
            class='hinge-bottom'
            style={{ backgroundImage: `url(${AluminumTexture.src})` }}
          >
          </div>
        </div>
        <div
          class='window-opener-base'
          style={{ backgroundImage: `url(${AluminumTexture.src})` }}
        >
        </div>
        <div
          class='window-opener'
          style={{ backgroundImage: `url(${AluminumTexture.src})` }}
        >
        </div>
        <div class='material-content relative'>
          <h3
            class='text-sm p-3 border border-[#862e44] font-[900] sm:text-xl lg:text-2xl absolute top-0 right-0 text-[#862e44] flex items-center select-none'
          >
            Aluminio
          </h3>
        </div>
      </div>
      <div
        class='border-x-[8px] border-y-[10px] behind-window-info p-4 absolute top-0 left-0 w-full h-full flex flex-col items-center animate-blurred-fade-in'
        style={{ borderImage: `url(${AluminumTexture.src}) 30 repeat` }}
      >
        <div class='behind-window-sections mb-3'>
          <p class='show-image selected' id='imageSectionAluminum'>Interior</p>
          <p class='show-advantage non-selected' id='advantageSectionAluminum'>
            Ventajas
          </p>
          <p
            class='show-disadvantage non-selected'
            id='disadvantageSectionAluminum'
          >
            Desventajas
          </p>
        </div>
        <img
          src={AluminumImage.src}
          class='w-[85%] md:w-[100%] object-cover show'
          id='imageContentAluminum'
        />
        <div class='hidden' id='advantageContentAluminum'>
          <h1>Ventajas</h1>
        </div>
        <div class='hidden' id='disadvantageContentAluminum'>
          <h1>Desventajas</h1>
        </div>
      </div>
    </div>

    <!-- Madera -->
    <div class='relative'>
      <div
        class='material-window animate-fade-in'
        style={{ borderImage: `url(${WoodTexture.src}) 30 repeat` }}
      >
        <div class='help-text'>Presiona para abrir</div>
        <div class='hinges-div'>
          <div
            class='hinge-top'
            style={{ backgroundImage: `url(${WoodTexture.src})` }}
          >
          </div>
          <div
            class='hinge-bottom'
            style={{ backgroundImage: `url(${WoodTexture.src})` }}
          >
          </div>
        </div>
        <div
          class='window-opener-base'
          style={{ backgroundImage: `url(${WoodTexture.src})` }}
        >
        </div>
        <div
          class='window-opener'
          style={{ backgroundImage: `url(${WoodTexture.src})` }}
        >
        </div>
        <div class='material-content relative'>
          <h3
            class='text-sm p-3 border border-[#862e44] font-[900] sm:text-xl lg:text-2xl absolute top-0 right-0 text-[#862e44] flex items-center select-none'
          >
            Madera
          </h3>
        </div>
      </div>
      <div
        class='border-x-[8px] border-y-[10px] behind-window-info p-4 absolute top-0 left-0 w-full h-full flex flex-col items-center animate-blurred-fade-in'
        style={{ borderImage: `url(${WoodTexture.src}) 30 repeat` }}
      >
        <div class='behind-window-sections mb-3'>
          <p class='show-image selected' id='imageSectionWood'>Interior</p>
          <p class='show-advantage non-selected' id='advantageSectionWood'>
            Ventajas
          </p>
          <p
            class='show-disadvantage non-selected'
            id='disadvantageSectionWood'
          >
            Desventajas
          </p>
        </div>
        <img
          src={WoodImage.src}
          class='w-[85%] md:w-[100%] object-cover show'
          id='imageContentWood'
        />
        <div class='hidden' id='advantageContentWood'>
          <h1>Ventajas</h1>
        </div>
        <div class='hidden' id='disadvantageContentWood'>
          <h1>Desventajas</h1>
        </div>
      </div>
    </div>
  </section>
</div>

<style>
  .material-window {
    width: 290px;
    height: 220px;
    background-color: rgba(90, 156, 192, 0.1);
    backdrop-filter: blur(4px);
    border: 22px solid transparent;
    border-style: solid;
    border-radius: 1px;
    box-shadow: 3px 3px 5px 0px rgba(0, 0, 0, 0.7);
    position: relative;
    z-index: 50;
    padding: 20px;
    cursor: pointer;
  }

  .help-text {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    text-align: center;
    color: whitesmoke;
    font-weight: 300;
    background-color: #862e44;
    border-radius: 1px 1px 0 0;
    z-index: 100;
  }

  .hinges-div {
    position: absolute;
    left: -12%;
    top: 0;
    bottom: 0;
    margin: auto;
    width: 8px;
    height: 80%;
  }

  .hinge-top {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 15px;
    border-radius: 2px 0 0 2px;
  }

  .hinge-bottom {
    position: absolute;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 15px;
    border-radius: 2px 0 0 2px;
  }

  .window-opener-base {
    position: absolute;
    top: 48.5%;
    right: -20px;
    width: 14px;
    height: 22px;
    border-radius: 5px;
    box-shadow: 1px 0px 5px 0px rgba(0, 0, 0, 0.8);
    cursor: pointer;
    z-index: 50;
  }

  .window-opener {
    position: absolute;
    top: 50%;
    right: -14px;
    width: 65px;
    height: 15px;
    border-radius: 1px 0 0 1px;
    box-shadow: 1px 0px 5px 0px rgba(0, 0, 0, 0.8);
    z-index: 100;
  }

  .window-opener-frame {
    position: absolute;
    width: 104%;
    height: 105%;
    top: 0;
    left: -5px;
    right: 0;
    bottom: 0;
    margin: auto;
    border: 2px solid rgba(80, 80, 80, 0.5);
    border-radius: 1px;
    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.3);
    z-index: 0;
  }

  .material-window:hover .window-opener {
    animation: putOpenerDown 0.5s ease-in-out both;
  }

  .material-window.open {
    transform-origin: left center;
    perspective: 1000px;
    transform-style: preserve-3d;
    animation: openWindow 1s ease-in-out both;
    transition: box-shadow 1s ease-in-out;
    box-shadow: none;
  }

  .material-window.close {
    transform-origin: left center;
    perspective: 1000px;
    transform-style: preserve-3d;
    transition: box-shadow 1s ease-in-out;
    animation: closeWindow 1s ease-in-out both;
  }

  .behind-window-info {
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.6);
  }

  .behind-window-sections {
    display: flex;
    gap: 20px;
  }

  .behind-window-sections p {
    position: relative;
    cursor: pointer;
    user-select: none;
    color: #862e44;
    padding: 4px;
    font-size: 0.9rem;
  }

  .behind-window-sections p.non-selected::after {
    content: "";
    position: absolute;
    bottom: 0px;
    left: 50%;
    width: 0;
    height: 1px;
    background-color: #862e44;
    transition:
      width 0.3s ease-in-out,
      left 0.3s ease-in-out;
  }

  .behind-window-sections p.non-selected:hover::after {
    left: 0;
    width: 100%;
  }

  .behind-window-sections p.selected {
    cursor: default;
    background-color: whitesmoke;
    border-bottom: 2px solid #862e44;
  }

  @media screen and (min-width: 640px) {
    .material-window {
      width: 400px;
      height: 300px;
      border: 26px solid transparent;
    }

    .window-opener-frame {
      left: -7px;
    }

    .window-opener-base {
      width: 16.5px;
      height: 28px;
      top: 48.3%;
      right: -23px;
    }

    .window-opener {
      width: 75px;
      height: 18px;
      right: -18px;
    }

    .hinges-div {
      left: -10%;
      width: 12px;
    }

    .hinge-top {
      height: 20px;
    }

    .hinge-bottom {
      height: 20px;
    }

    .behind-window-sections p {
      font-size: 1rem;
    }
  }

  @media screen and (min-width: 1100px) {
    .material-window {
      width: 500px;
      height: 400px;
      border: 30px solid transparent;
    }

    .window-opener-frame {
      left: -8.5px;
    }

    .window-opener-base {
      width: 20px;
      height: 32px;
      top: 48.2%;
      right: -26px;
    }

    .window-opener {
      width: 85px;
      height: 20px;
    }

    .hinges-div {
      left: -9.5%;
      width: 15px;
    }

    .hinge-top {
      height: 25px;
    }

    .hinge-bottom {
      height: 25px;
    }
  }

  @keyframes slide-out-top {
    0% {
      transform: translateY(0);
    }
    100% {
      transform: translateY(-10px);
    }
  }

  @keyframes putOpenerDown {
    from {
      transform: rotate(0deg);
      transform-origin: right bottom;
    }
    to {
      transform: rotate(-16deg);
      transform-origin: right bottom;
    }
  }

  @keyframes openWindow {
    0% {
      transform: rotateY(0deg);
    }
    100% {
      transform: rotateY(95deg);
    }
  }

  @keyframes closeWindow {
    0% {
      transform: rotateY(95deg);
    }
    100% {
      transform: rotateY(0deg);
    }
  }
</style>
